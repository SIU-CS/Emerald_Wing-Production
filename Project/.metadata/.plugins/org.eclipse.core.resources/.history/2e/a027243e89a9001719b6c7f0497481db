package com.test;

import java.util.ArrayList;

import com.badlogic.gdx.graphics.g3d.ModelBatch;
import com.badlogic.gdx.graphics.g3d.utils.MeshPartBuilder;
import com.badlogic.gdx.graphics.g3d.utils.MeshPartBuilder.VertexInfo;
import com.badlogic.gdx.graphics.g3d.utils.ModelBuilder;
import com.noise.OpenSimplexNoise;

public class RecBuilder extends Thread{
	
	private OpenSimplexNoise noise;
	
	private ModelBatch modelBatch;

	private float acceleration = 0;
	
	public static float accelerationIncre = 0.03f;
	public static float size = 1.9f;
	public static float offIncr = 0.25f;
	
	private final int gridMin = -25;
	private final int gridMax = 25;
	private final int scale = 1;
	
	private int gridTotal = ((-1*gridMin)+gridMax);
	
	private ModelBuilder modelBuilder = new ModelBuilder();
	
	private MeshPartBuilder builder;
	
	private int zS = 0;
	private int xS = 0;
	
	public RecBuilder(){
		modelBatch = new ModelBatch();
		
		noise = new OpenSimplexNoise();
	}
	
	public void setVert(VertexInfo ver1, VertexInfo ver2, VertexInfo ver3, VertexInfo ver4){
		vertexs.add(ver1);
		vertexs.add(ver2);
		vertexs.add(ver3);
		vertexs.add(ver4);
	}
	
	private ArrayList<VertexInfo> vertexs = new ArrayList<VertexInfo>();
	
	public ArrayList<VertexInfo> getVertArray(){
		return vertexs;
	}
	
	public void update(){
		
		acceleration -= accelerationIncre;
		
		float zoff = acceleration;
		for(int z = 0; z < gridTotal; z += scale){
			float xoff = 0;
			for(int x = 0; x < gridTotal; x += scale){
				zS = z+gridMin;
				xS = x+gridMin;
				vertexs.get(0).setPos(xS, (float) (noise.eval(xoff, zoff)*size), zS);
				vertexs.get(1).setPos(xS, (float) (noise.eval(xoff, zoff+offIncr)*size), zS+scale);
				vertexs.get(2).setPos(xS+scale, (float) (noise.eval(xoff+offIncr, zoff)*size), zS);
				vertexs.get(3).setPos(xS+scale, (float) (noise.eval(xoff+offIncr, zoff+offIncr)*size), zS+scale);
				
				xoff += offIncr;
			}
			zoff += offIncr;
		}
	}
}
